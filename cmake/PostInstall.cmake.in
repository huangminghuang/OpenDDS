
string(REGEX REPLACE "^~"  "$ENV{HOME}" DESTDIR "$ENV{DESTDIR}")
set(INSTALL_PREFIX ${DESTDIR}@CMAKE_INSTALL_PREFIX@)
set(OpenDDS_ROOT ${DESTDIR}@OpenDDS_INSTALL_DIR@)


function(symlink source target)
  execute_process(COMMAND ${CMAKE_COMMAND} -E create_symlink ${source} ${target})
  message("creating symoblic link ${target} --> ${source}")
endfunction()

file(MAKE_DIRECTORY ${INSTALL_PREFIX}/lib)
file(MAKE_DIRECTORY ${INSTALL_PREFIX}/bin)
file(MAKE_DIRECTORY ${INSTALL_PREFIX}/include/tools/modeling)

file(GLOB libs ${OpenDDS_ROOT}/lib/*)
foreach(file ${libs})
  get_filename_component(name ${file} NAME)
  symlink(${file} ${INSTALL_PREFIX}/lib/${name})

endforeach()

file(GLOB exes ${OpenDDS_ROOT}/bin/*)
foreach(file ${exes})
  get_filename_component(name ${file} NAME)
  symlink(${file} ${INSTALL_PREFIX}/bin/${name})
endforeach()

symlink(${OpenDDS_ROOT}/dds ${INSTALL_PREFIX}/include/dds)
symlink(${OpenDDS_ROOT}/tools/modeling/codegen ${INSTALL_PREFIX}/include/tools/modeling/codegen)

