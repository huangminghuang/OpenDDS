branches:
  only:
    - cmake

os: Visual Studio 2017

clone_depth: 15

install:
  - git clone -q -b cmake --depth 1 git://github.com/huangminghuang/ACE_TAO.git
  - cmake -Bbuild -H. -A %platform% -DACE_UNITY_BUILD=ON

platform:
  - x64

configuration:
  - Debug

build:
  parallel: true
  project: build/OpenDDS.sln

test_script:
  - ps: cd build
  - ctest -C %configuration% -j 6